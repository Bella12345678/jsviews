(function(a){a.observable=function(b){return a.isArray(b)?new d(b):new c(b)};var f=[].splice;function c(a){if(!this.data)return new c(a);this._data=a;return this}a.observable.Object=c;c.prototype={_data:null,data:function(){return this._data},setProperty:function(b,e){if(a.isArray(b))for(var h=0,l=b.length;h<l;h++){var j=b[h];this.setProperty(j.name,j.value)}else if(typeof b==="object")for(var k in b)this.setProperty(k,b[k]);else{var f,d,i=this._data,c=g(i,b);b=c[1];c=c[0];if(c){d=c[b];if(a.isFunction(d)){f=d;d=d.call(c)}if(d!==e){if(f){f.call(c,e);e=f.call(c)}else c[b]=e;a(i).triggerHandler("propertyChange",{path:b,value:e})}}}return this}};function g(a,b){if(a&&b){var c=b.split(".");b=c.pop();while(a&&c.length)a=a[c.shift()];return[a,b]}return[]}function d(a){if(!this.data)return new d(a);this._data=a;return this}function b(c,b){a([c]).triggerHandler("arrayChange",b)}function e(a){if(typeof a!=="number"||a<0)throw"Invalid index.";}a.observable.Array=d;d.prototype={_data:null,data:function(){return this._data},insert:function(c){e(c);if(arguments.length>1){var g=arguments[1],d=g==null?[g]:a.makeArray(g);if(d.length>0){f.apply(this._data,[c,0].concat(d));b(this._data,{change:"insert",index:c,items:d})}}},remove:function(c,a){e(c);a=a===undefined||a===null?1:a;if(a){var d=this._data.slice(c,c+a);this._data.splice(c,a);b(this._data,{change:"remove",index:c,items:d})}},move:function(d,f,c){e(d);e(f);c=c===undefined||c===null?1:c;if(c){var g=this._data.slice(d,d+c),h=a.observable(this._data);b(this._data,{change:"move",oldIndex:d,index:index,items:g})}},refresh:function(a){f.apply(this._data,[0,this._data.length].concat(a));b(this._data,{change:"refresh"})}}})(jQuery);