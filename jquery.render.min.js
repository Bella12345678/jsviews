/*
 * jQuery Render Plugin v1.0pre
 * Optimized version of jQuery Templates, for rendering to string
 * http://github.com/BorisMoore/jsrender
 */
(function(a){var v=a.fn.domManip,g=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,i=0,j=[],p=0,n="$view.calls($view,__,$1,$2);__=[];",m=["call=$view.calls();__=call[1].concat($view.","(call,__));"];function k(d,b){var c=d.parent&&d.parent.ctx;d.ctx=b&&b===c?c:(d._ctx=b,c?a.extend({},c,b):b)}function c(g,b,e,h,j){var d,c=this,f;c.parent=b;b=b||{};f=b.ctx;a.extend(c,{path:j||"",data:h||b.data||{},tmpl:e||null,_wrap:b._wrap});k(c,g);if(e){d=c.tmpl(a,c);c._ctnt=!!a.view&&a.isArray(b.data)?[].concat("<!--item-->",d,"<!--/item-->"):d;c.key=++i}}a.fn.extend({render:function(d,c,b){return a.render(this[0],d,c,b)},template:function(c,b){return a.template(c,this[0],b)}});function r(b){try{return a(b)}catch(c){}return b}a.extend({render:function(e,h,g,b,c){var a=f(e,h,g,b,c);a=!c&&b&&e?a:d(b,a).join("");i=0;return a},template:function(c,b){if(b){if(typeof b==="string")b=e(b);else if(b instanceof a)b=b[0];if(b){if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",e(b.innerHTML));a.template[b._name=b._name||c||"_"+p++]=b}return b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,g.test(c)?c:r(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")},tmplSettings:{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($view.nest($1,$2s,$2));}"},wrap:{_default:{$2:"null"},open:n,close:m.join("wrap")},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},":":{open:"$1"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},view:{tmpl:null,nodes:[],calls:function(a){if(!a)return j.pop();j.push(arguments)},nest:function(d,a,c,b){return f(d,c,b,this,a)},wrap:function(b,c){b[0]._wrapped=c;return a.render(a.template(b[2]),b[3],b[4],b[0])},html:function(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||o(a)})}}}});var q=a.tmplSettings.tag,t=a.template(null,"{{html this.html()}}");c.prototype=a.tmplSettings.view;function f(b,e,h,d,i){var g,f,j=!d;if(b){b=a.template(b);if(!a.isFunction(b))b=a.template[b]||a.template(null,b)}if(!b)return null;if(typeof e==="function")e=e.call(d||{});d&&d._wrapped&&l(d);if(a.isArray(e)){g=new c(h,d,null,e,i);f=a.map(e,function(a){return a?new c(h,g,b,a,"*"):null})}else f=[new c(h,d,b,e,i)];return a.view?[].concat("<!--tmpl("+(g||f[0]).path+") "+b._name+"-->",f,"<!--/tmpl-->"):f}function d(c,b){return b?a.map(b,function(a){return typeof a==="string"?a:d(a,a._ctnt)}):c||[]}function e(d){var c=/\$\{([^\}]*)\}/g,e="var call,__=[],$data=$view.data,$ctx=$view.ctx||{};with($data){__.push('"+a.trim(d).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(c,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*)\))?\s*\}\}/g,function(l,j,k,d,a,c,e){var i=q[k],h,f,g;h=i._default||[];if(c&&!/\w$/.test(a)){a+=c;c=""}if(a){a=b(a);e=e?","+b(e)+")":c?")":"";f=c?a.indexOf(".")>-1?a+b(c):"("+a+").call($view"+e:a;g=c?f:"(typeof("+a+")==='function'?("+a+").call($view):("+a+"))"}else g=f=h.$1||"null";d=b(d);return"');"+i[j?"close":"open"].split("$notnull_1").join(a?"typeof("+a+")!=='undefined' && ("+a+")!=null":"true").split("$1a").join(g).split("$2s").join("'"+d+"'").split("$1").join(f).split("$2").join(d||h.$2||"")+"__.push('";return test})+"');}return __;";return new Function("$","$view",e)}function l(c){var b=c._wrapped;c._wrap=d(c,a.isArray(b)?b:[g.test(b)?b:a(b).html()]).join("")}function b(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function o(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}})(jQuery);